---
markmap:
  colorFreezeLevel: 3
---


# 图生图

## 原理

- 文生图 引入的随机性比较大
- 类似于 "原型图"

## 提示词反推

- 作用: 提取已上传图片的提示词

### 两种反推方式

- **CLIP反推** 提示词：生成自然语言式
- **DeepBooru反推** 提示词：生成关键词组

## 图片上传区域

### 几种情况使用

- 图生图时，上传需要重绘的图片
- 进行局部重绘时，涂抹蒙版
- 进行局部重绘(上传蒙版)时，上传原图和蒙版

## 图片生成区域

- 展示


## 缩放模式 Resize mode

- 作用:原图的和生成图尺寸不一样，将采取选择的缩放
- 1. 拉伸(Just resize)
- 2. 裁剪（Crop and resize）:多余的部分剪掉
- 3. 填充（Resize and fill）:类似ps的图片扩展
- 4. 直接缩放: 第一个拉伸类似

## Resize to 和 Resize by

-  Resize to: 缩放至 xxx * xxx
-  resize by: 指的是把图片缩放多少倍


## 提示词相关性 CFG Scale

- 生成的内容多大程度和提示词相关，一般填7左右


## 重绘幅度 Denosing

- 重绘幅度是文生图最重要的参数了，
- 跟原图有多像
- 范围从0-1，如0.1会对图片细节进行修改，0.7以上会对图片进行大幅度重绘


## 局部重绘特有参数


### 蒙版模糊 Mask blur

- 蒙版模糊就是将我们涂抹区域，从边缘向中间和向外透明过渡
- 高斯模糊的程度
- 值越大，可见的重绘范围越小，如果大于我们涂抹的范围，则重绘完全消失（透明）

### 蒙版透明 Mask transparency

- 蒙版透明是在蒙版上加个透明效果

### 蒙版模式 Mask mode

- 1. 重绘蒙版内容
- 2. 重绘非蒙版内容

### 蒙住的内容 Masked Content

- 填充 fill
- 原图 original
- latent noise（潜在噪声）是指在生成图像时添加到模型输入中的随机噪声.
- latent nothing 潜在噪声为空

### 重绘区域 Inpaint Area

- 全图
- 局部 

### 仅蒙版模式的边缘预留像素

- 就是扩大我们的蒙版区域，将一部分原图的内容放到蒙版里。当然这部分内容也不会被重绘，只是一个参考项



## 提高分辨率

- 本身就是一种 高清修复

### 脚本

- 辅助工具
- SD 放大
  - 分成几块修复，在拼一起
  - 优势:突破显存限制 ,画面精细，细节更丰富
  - 缺点：分割绘画过程 不可控，可能会出现额外元素
